var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!(i&&_arr.length===i));_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i['return']&&_i['return']()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError('Invalid attempt to destructure non-iterable instance')}}(),_createClass=function(){function defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,'value'in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError('Cannot call a class as a function')}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return call&&('object'==typeof call||'function'==typeof call)?call:self}function _inherits(subClass,superClass){if('function'!=typeof superClass&&null!==superClass)throw new TypeError('Super expression must either be null or a function, not '+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}import MathArray from'./math-array';import{checkNumber}from'./common';import Vector2,{validateVector2}from'./vector2';import Vector3,{validateVector3}from'./vector3';import Vector4,{validateVector4}from'./vector4';import assert from'./lib/assert';import mat4_determinant from'gl-mat4/determinant';import mat4_fromQuat from'gl-mat4/fromQuat';import mat4_frustum from'gl-mat4/frustum';import mat4_lookAt from'gl-mat4/lookAt';import mat4_ortho from'gl-mat4/ortho';import mat4_perspective from'gl-mat4/perspective';import mat4_transpose from'gl-mat4/transpose';import mat4_invert from'gl-mat4/invert';import mat4_multiply from'gl-mat4/multiply';import mat4_rotateX from'gl-mat4/rotateX';import mat4_rotateY from'gl-mat4/rotateY';import mat4_rotateZ from'gl-mat4/rotateZ';import mat4_rotate from'gl-mat4/rotate';import mat4_scale from'gl-mat4/scale';import mat4_translate from'gl-mat4/translate';import vec2_transformMat4 from'gl-vec2/transformMat4';import vec3_transformMat4 from'gl-vec3/transformMat4';import vec4_transformMat4 from'gl-vec4/transformMat4';var IDENTITY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];export function validateMatrix4(m){var _NumberisFinite=Number.isFinite;return 16===m.length&&_NumberisFinite(m[0])&&_NumberisFinite(m[1])&&_NumberisFinite(m[2])&&_NumberisFinite(m[3])&&_NumberisFinite(m[4])&&_NumberisFinite(m[5])&&_NumberisFinite(m[6])&&_NumberisFinite(m[7])&&_NumberisFinite(m[8])&&_NumberisFinite(m[9])&&_NumberisFinite(m[10])&&_NumberisFinite(m[11])&&_NumberisFinite(m[12])&&_NumberisFinite(m[13])&&_NumberisFinite(m[14])&&_NumberisFinite(m[15])}var tempVector4=[0,0,0,0],Matrix4=function(_MathArray){function Matrix4(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];_classCallCheck(this,Matrix4);var _this=_possibleConstructorReturn(this,(Matrix4.__proto__||Object.getPrototypeOf(Matrix4)).call(this));return Array.isArray(args[0])&&1===arguments.length?_this.copy(args[0]):_this.identity(),_this}return _inherits(Matrix4,_MathArray),_createClass(Matrix4,[{key:'setRowMajor',value:function setRowMajor(){var m00=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,m10=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,m20=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,m30=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,m01=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,m11=5<arguments.length&&void 0!==arguments[5]?arguments[5]:1,m21=6<arguments.length&&void 0!==arguments[6]?arguments[6]:0,m31=7<arguments.length&&void 0!==arguments[7]?arguments[7]:0,m02=8<arguments.length&&void 0!==arguments[8]?arguments[8]:0,m12=9<arguments.length&&void 0!==arguments[9]?arguments[9]:0,m22=10<arguments.length&&void 0!==arguments[10]?arguments[10]:1,m32=11<arguments.length&&void 0!==arguments[11]?arguments[11]:0,m03=12<arguments.length&&void 0!==arguments[12]?arguments[12]:0,m13=13<arguments.length&&void 0!==arguments[13]?arguments[13]:0,m23=14<arguments.length&&void 0!==arguments[14]?arguments[14]:0,m33=15<arguments.length&&void 0!==arguments[15]?arguments[15]:1;return this.set(m00,m01,m02,m03,m10,m11,m12,m13,m20,m21,m22,m23,m30,m31,m32,m33)}},{key:'setColumnMajor',value:function setColumnMajor(){var m00=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,m01=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,m02=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,m03=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,m10=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,m11=5<arguments.length&&void 0!==arguments[5]?arguments[5]:1,m12=6<arguments.length&&void 0!==arguments[6]?arguments[6]:0,m13=7<arguments.length&&void 0!==arguments[7]?arguments[7]:0,m20=8<arguments.length&&void 0!==arguments[8]?arguments[8]:0,m21=9<arguments.length&&void 0!==arguments[9]?arguments[9]:0,m22=10<arguments.length&&void 0!==arguments[10]?arguments[10]:1,m23=11<arguments.length&&void 0!==arguments[11]?arguments[11]:0,m30=12<arguments.length&&void 0!==arguments[12]?arguments[12]:0,m31=13<arguments.length&&void 0!==arguments[13]?arguments[13]:0,m32=14<arguments.length&&void 0!==arguments[14]?arguments[14]:0,m33=15<arguments.length&&void 0!==arguments[15]?arguments[15]:1;return this.set(m00,m01,m02,m03,m10,m11,m12,m13,m20,m21,m22,m23,m30,m31,m32,m33)}},{key:'set',value:function set(m00,m01,m02,m03,m10,m11,m12,m13,m20,m21,m22,m23,m30,m31,m32,m33){return this[0]=m00,this[1]=m01,this[2]=m02,this[3]=m03,this[4]=m10,this[5]=m11,this[6]=m12,this[7]=m13,this[8]=m20,this[9]=m21,this[10]=m22,this[11]=m23,this[12]=m30,this[13]=m31,this[14]=m32,this[15]=m33,this.check(),this}},{key:'determinant',value:function determinant(){return mat4_determinant(this)}},{key:'identity',value:function identity(){for(var i=0;i<IDENTITY.length;++i)this[i]=IDENTITY[i];return this.check(),this}},{key:'fromQuaternion',value:function fromQuaternion(q){return mat4_fromQuat(this,q),this.check(),this}},{key:'frustum',value:function frustum(_ref){var left=_ref.left,right=_ref.right,bottom=_ref.bottom,top=_ref.top,near=_ref.near,far=_ref.far;return mat4_frustum(this,left,right,bottom,top,near,far),this.check(),this}},{key:'lookAt',value:function lookAt(){var _ref2=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},eye=_ref2.eye,_ref2$center=_ref2.center,center=void 0===_ref2$center?[0,0,0]:_ref2$center,_ref2$up=_ref2.up,up=void 0===_ref2$up?[0,1,0]:_ref2$up;return mat4_lookAt(this,eye,center,up),this.check(),this}},{key:'ortho',value:function ortho(_ref3){var left=_ref3.left,right=_ref3.right,bottom=_ref3.bottom,top=_ref3.top,_ref3$near=_ref3.near,near=void 0===_ref3$near?.1:_ref3$near,_ref3$far=_ref3.far,far=void 0===_ref3$far?500:_ref3$far;return mat4_ortho(this,left,right,bottom,top,near,far),this.check(),this}},{key:'perspective',value:function perspective(){var _MathPI=Math.PI,_ref4=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},_ref4$fov=_ref4.fov,fov=void 0===_ref4$fov?45*_MathPI/180:_ref4$fov,_ref4$aspect=_ref4.aspect,aspect=void 0===_ref4$aspect?1:_ref4$aspect,_ref4$near=_ref4.near,near=void 0===_ref4$near?.1:_ref4$near,_ref4$far=_ref4.far,far=void 0===_ref4$far?500:_ref4$far;if(fov>2*_MathPI)throw Error('radians');return mat4_perspective(this,fov,aspect,near,far),this.check(),this}},{key:'transpose',value:function transpose(){return mat4_transpose(this,this),this.check(),this}},{key:'invert',value:function invert(){return mat4_invert(this,this),this.check(),this}},{key:'multiplyLeft',value:function multiplyLeft(a){return mat4_multiply(this,a,this),this.check(),this}},{key:'multiplyRight',value:function multiplyRight(a){return mat4_multiply(this,this,a),this.check(),this}},{key:'rotateX',value:function rotateX(radians){return mat4_rotateX(this,this,radians),this.check(),this}},{key:'rotateY',value:function rotateY(radians){return mat4_rotateY(this,this,radians),this.check(),this}},{key:'rotateZ',value:function rotateZ(radians){return mat4_rotateZ(this,this,radians),this.check(),this}},{key:'rotateXYZ',value:function rotateXYZ(_ref5){var _ref6=_slicedToArray(_ref5,3),rx=_ref6[0],ry=_ref6[1],rz=_ref6[2];return this.rotateX(rx).rotateY(ry).rotateZ(rz)}},{key:'rotateAxis',value:function rotateAxis(radians,axis){return mat4_rotate(this,this,radians,axis),this.check(),this}},{key:'scale',value:function scale(vec){return mat4_scale(this,this,vec),this.check(),this}},{key:'translate',value:function translate(vec){return mat4_translate(this,this,vec),this.check(),this}},{key:'transformVector2',value:function transformVector2(vector,out){return out=out||new Vector2,vec2_transformMat4(out,vector,this),assert(validateVector2(out)),out}},{key:'transformVector3',value:function transformVector3(vector){var out=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Vector3;return out=out||new Vector3,vec3_transformMat4(out,vector,this),assert(validateVector3(out)),out}},{key:'transformVector4',value:function transformVector4(vector){var out=1<arguments.length&&void 0!==arguments[1]?arguments[1]:new Vector4;return out=out||new Vector4,vec4_transformMat4(out,vector,this),assert(validateVector4(out)),out}},{key:'transformVector',value:function transformVector(vector,out){switch(vector.length){case 2:return this.transformVector2(vector,out);case 3:return this.transformVector3(vector,out);case 4:return this.transformVector4(vector,out);default:throw new Error('Illegal vector');}}},{key:'transformDirection',value:function transformDirection(vector,out){switch(vector.length){case 2:vec4_transformMat4(tempVector4,[vector[0],vector[1],0,0],this),out=out||new Vector2,out[0]=tempVector4[0],out[1]=tempVector4[1];break;case 3:vec4_transformMat4(tempVector4,[vector[0],vector[1],vector[2],0],this),out=out||new Vector3,out[0]=tempVector4[0],out[1]=tempVector4[1],out[2]=tempVector4[2];break;case 4:assert(0===vector[3]),out=out||new Vector4,vec4_transformMat4(out,vector,this);break;default:throw new Error('Illegal vector');}return out}},{key:'transformPoint',value:function transformPoint(vector,out){switch(vector.length){case 2:out=out||new Vector2,vec4_transformMat4(out,[vector[0],vector[1],0,1],this),out.length=2,assert(validateVector2(out));break;case 3:out=out||new Vector3,vec4_transformMat4(out,[vector[0],vector[1],vector[2],1],this),out.length=3,assert(validateVector3(out));break;case 4:assert(0!==vector[3]),out=out||new Vector4,vec4_transformMat4(out,vector,this),assert(validateVector4(out));break;default:throw new Error('Illegal vector');}return out}},{key:'ELEMENTS',get:function get(){return 16}},{key:'m00',get:function get(){return this[0]},set:function set(value){return this[0]=checkNumber(value)}},{key:'m01',get:function get(){return this[4]},set:function set(value){return this[4]=checkNumber(value)}},{key:'m02',get:function get(){return this[8]},set:function set(value){return this[8]=checkNumber(value)}},{key:'m03',get:function get(){return this[12]},set:function set(value){return this[12]=checkNumber(value)}},{key:'m10',get:function get(){return this[1]},set:function set(value){return this[1]=checkNumber(value)}},{key:'m11',get:function get(){return this[5]},set:function set(value){return this[5]=checkNumber(value)}},{key:'m12',get:function get(){return this[9]},set:function set(value){return this[9]=checkNumber(value)}},{key:'m13',get:function get(){return this[13]},set:function set(value){return this[13]=checkNumber(value)}},{key:'m20',get:function get(){return this[2]},set:function set(value){return this[2]=checkNumber(value)}},{key:'m21',get:function get(){return this[6]},set:function set(value){return this[6]=checkNumber(value)}},{key:'m22',get:function get(){return this[10]},set:function set(value){return this[10]=checkNumber(value)}},{key:'m23',get:function get(){return this[14]},set:function set(value){return this[14]=checkNumber(value)}},{key:'m30',get:function get(){return this[3]},set:function set(value){return this[3]=checkNumber(value)}},{key:'m31',get:function get(){return this[7]},set:function set(value){return this[7]=checkNumber(value)}},{key:'m32',get:function get(){return this[11]},set:function set(value){return this[11]=checkNumber(value)}},{key:'m33',get:function get(){return this[15]},set:function set(value){return this[15]=checkNumber(value)}}]),Matrix4}(MathArray);export default Matrix4;
//# sourceMappingURL=matrix4.js.map