{"version":3,"sources":["../src/matrix4.js"],"names":["validateMatrix4","IDENTITY","m","Number","isFinite","length","tempVector4","Matrix4","args","Array","isArray","copy","identity","m00","m10","m20","m30","m01","m11","m21","m31","m02","m12","m22","m32","m03","m13","m23","m33","set","check","i","q","left","right","bottom","top","near","far","eye","center","up","Math","PI","fov","aspect","Error","a","radians","rx","ry","rz","rotateX","rotateY","rotateZ","axis","vec","vector","out","transformVector2","transformVector3","transformVector4","value"],"mappings":"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","file":"matrix4.js","sourcesContent":["// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\nimport MathArray from './math-array';\nimport {checkNumber} from './common';\nimport Vector2, {validateVector2} from './vector2';\nimport Vector3, {validateVector3} from './vector3';\nimport Vector4, {validateVector4} from './vector4';\nimport assert from './lib/assert';\n\n// gl-matrix is too big. Cherry-pick individual imports from stack.gl version\n/* eslint-disable camelcase */\nimport mat4_determinant from 'gl-mat4/determinant';\nimport mat4_fromQuat from 'gl-mat4/fromQuat';\nimport mat4_frustum from 'gl-mat4/frustum';\nimport mat4_lookAt from 'gl-mat4/lookAt';\nimport mat4_ortho from 'gl-mat4/ortho';\nimport mat4_perspective from 'gl-mat4/perspective';\nimport mat4_transpose from 'gl-mat4/transpose';\nimport mat4_invert from 'gl-mat4/invert';\nimport mat4_multiply from 'gl-mat4/multiply';\nimport mat4_rotateX from 'gl-mat4/rotateX';\nimport mat4_rotateY from 'gl-mat4/rotateY';\nimport mat4_rotateZ from 'gl-mat4/rotateZ';\nimport mat4_rotate from 'gl-mat4/rotate';\nimport mat4_scale from 'gl-mat4/scale';\nimport mat4_translate from 'gl-mat4/translate';\nimport vec2_transformMat4 from 'gl-vec2/transformMat4';\nimport vec3_transformMat4 from 'gl-vec3/transformMat4';\nimport vec4_transformMat4 from 'gl-vec4/transformMat4';\n\nconst IDENTITY = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n\nexport function validateMatrix4(m) {\n  return m.length === 16 &&\n    Number.isFinite(m[0]) && Number.isFinite(m[1]) &&\n    Number.isFinite(m[2]) && Number.isFinite(m[3]) &&\n    Number.isFinite(m[4]) && Number.isFinite(m[5]) &&\n    Number.isFinite(m[6]) && Number.isFinite(m[7]) &&\n    Number.isFinite(m[8]) && Number.isFinite(m[9]) &&\n    Number.isFinite(m[10]) && Number.isFinite(m[11]) &&\n    Number.isFinite(m[12]) && Number.isFinite(m[13]) &&\n    Number.isFinite(m[14]) && Number.isFinite(m[15]);\n}\n\nconst tempVector4 = [0, 0, 0, 0];\n\nexport default class Matrix4 extends MathArray {\n  constructor(...args) {\n    super();\n    if (Array.isArray(args[0]) && arguments.length === 1) {\n      this.copy(args[0]);\n    } else {\n      this.identity();\n    }\n  }\n\n  get ELEMENTS() {\n    return 16;\n  }\n\n  /* eslint-disable max-params */\n  setRowMajor(\n    m00 = 1, m10 = 0, m20 = 0, m30 = 0,\n    m01 = 0, m11 = 1, m21 = 0, m31 = 0,\n    m02 = 0, m12 = 0, m22 = 1, m32 = 0,\n    m03 = 0, m13 = 0, m23 = 0, m33 = 1\n  ) {\n    return this.set(\n      m00, m01, m02, m03,\n      m10, m11, m12, m13,\n      m20, m21, m22, m23,\n      m30, m31, m32, m33\n    );\n  }\n\n  setColumnMajor(\n    m00 = 1, m01 = 0, m02 = 0, m03 = 0,\n    m10 = 0, m11 = 1, m12 = 0, m13 = 0,\n    m20 = 0, m21 = 0, m22 = 1, m23 = 0,\n    m30 = 0, m31 = 0, m32 = 0, m33 = 1\n  ) {\n    return this.set(\n      m00, m01, m02, m03,\n      m10, m11, m12, m13,\n      m20, m21, m22, m23,\n      m30, m31, m32, m33\n    );\n  }\n\n  set(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n    this[0] = m00;\n    this[1] = m01;\n    this[2] = m02;\n    this[3] = m03;\n    this[4] = m10;\n    this[5] = m11;\n    this[6] = m12;\n    this[7] = m13;\n    this[8] = m20;\n    this[9] = m21;\n    this[10] = m22;\n    this[11] = m23;\n    this[12] = m30;\n    this[13] = m31;\n    this[14] = m32;\n    this[15] = m33;\n    this.check();\n    return this;\n  }\n  /* eslint-enable max-params */\n\n  // toString() {\n  //   if (config.printRowMajor) {\n  //     mat4_str(this);\n  //   } else {\n  //     mat4_str(this);\n  //   }\n  // }\n\n  // Row major setters and getters\n  /* eslint-disable no-multi-spaces, brace-style, no-return-assign */\n  get m00()      { return this[0]; }\n  set m00(value) { return this[0] = checkNumber(value); }\n  get m01()      { return this[4]; }\n  set m01(value) { return this[4] = checkNumber(value); }\n  get m02()      { return this[8]; }\n  set m02(value) { return this[8] = checkNumber(value); }\n  get m03()      { return this[12]; }\n  set m03(value) { return this[12] = checkNumber(value); }\n  get m10()      { return this[1]; }\n  set m10(value) { return this[1] = checkNumber(value); }\n  get m11()      { return this[5]; }\n  set m11(value) { return this[5] = checkNumber(value); }\n  get m12()      { return this[9]; }\n  set m12(value) { return this[9] = checkNumber(value); }\n  get m13()      { return this[13]; }\n  set m13(value) { return this[13] = checkNumber(value); }\n  get m20()      { return this[2]; }\n  set m20(value) { return this[2] = checkNumber(value); }\n  get m21()      { return this[6]; }\n  set m21(value) { return this[6] = checkNumber(value); }\n  get m22()      { return this[10]; }\n  set m22(value) { return this[10] = checkNumber(value); }\n  get m23()      { return this[14]; }\n  set m23(value) { return this[14] = checkNumber(value); }\n  get m30()      { return this[3]; }\n  set m30(value) { return this[3] = checkNumber(value); }\n  get m31()      { return this[7]; }\n  set m31(value) { return this[7] = checkNumber(value); }\n  get m32()      { return this[11]; }\n  set m32(value) { return this[11] = checkNumber(value); }\n  get m33()      { return this[15]; }\n  set m33(value) { return this[15] = checkNumber(value); }\n  /* eslint-enable no-multi-spaces, brace-style, no-return-assign */\n\n  // Accessors\n\n  determinant() {\n    return mat4_determinant(this);\n  }\n\n  // Constructors\n\n  identity() {\n    for (let i = 0; i < IDENTITY.length; ++i) {\n      this[i] = IDENTITY[i];\n    }\n    this.check();\n    return this;\n  }\n\n  // Calculates a 4x4 matrix from the given quaternion\n  // q quat  Quaternion to create matrix from\n  fromQuaternion(q) {\n    mat4_fromQuat(this, q);\n    this.check();\n    return this;\n  }\n\n  // Generates a frustum matrix with the given bounds\n  // left  Number  Left bound of the frustum\n  // right Number  Right bound of the frustum\n  // bottom  Number  Bottom bound of the frustum\n  // top Number  Top bound of the frustum\n  // near  Number  Near bound of the frustum\n  // far Number  Far bound of the frustum\n  frustum({left, right, bottom, top, near, far}) {\n    mat4_frustum(this, left, right, bottom, top, near, far);\n    this.check();\n    return this;\n  }\n\n  // Generates a look-at matrix with the given eye position, focal point,\n  // and up axis\n  // eye vec3  Position of the viewer\n  // center  vec3  Point the viewer is looking at\n  // up  vec3  vec3 pointing up\n  lookAt({\n    eye,\n    center = [0, 0, 0],\n    up = [0, 1, 0]\n  } = {}) {\n    mat4_lookAt(this, eye, center, up);\n    this.check();\n    return this;\n  }\n\n  // Generates a orthogonal projection matrix with the given bounds\n  // left  number  Left bound of the frustum\n  // right number  Right bound of the frustum\n  // bottom  number  Bottom bound of the frustum\n  // top number  Top bound of the frustum\n  // near  number  Near bound of the frustum\n  // far number  Far bound of the frustum\n  ortho({left, right, bottom, top, near = 0.1, far = 500}) {\n    mat4_ortho(this, left, right, bottom, top, near, far);\n    this.check();\n    return this;\n  }\n\n  // Generates a perspective projection matrix with the given bounds\n  // fovy  number  Vertical field of view in radians\n  // aspect  number  Aspect ratio. typically viewport width/height\n  // near  number  Near bound of the frustum\n  // far number  Far bound of the frustum\n  perspective({\n    fov = 45 * Math.PI / 180,\n    aspect = 1,\n    near = 0.1,\n    far = 500\n  } = {}) {\n    if (fov > Math.PI * 2) {\n      throw Error('radians');\n    }\n    mat4_perspective(this, fov, aspect, near, far);\n    this.check();\n    return this;\n  }\n\n  // Modifiers\n\n  transpose() {\n    mat4_transpose(this, this);\n    this.check();\n    return this;\n  }\n\n  invert() {\n    mat4_invert(this, this);\n    this.check();\n    return this;\n  }\n\n  // Operations\n\n  multiplyLeft(a) {\n    mat4_multiply(this, a, this);\n    this.check();\n    return this;\n  }\n\n  multiplyRight(a) {\n    mat4_multiply(this, this, a);\n    this.check();\n    return this;\n  }\n\n  // Rotates a matrix by the given angle around the X axis\n  rotateX(radians) {\n    mat4_rotateX(this, this, radians);\n    this.check();\n    return this;\n  }\n\n  // Rotates a matrix by the given angle around the Y axis.\n  rotateY(radians) {\n    mat4_rotateY(this, this, radians);\n    this.check();\n    return this;\n  }\n\n  // Rotates a matrix by the given angle around the Z axis.\n  rotateZ(radians) {\n    mat4_rotateZ(this, this, radians);\n    this.check();\n    return this;\n  }\n\n  rotateXYZ([rx, ry, rz]) {\n    return this.rotateX(rx).rotateY(ry).rotateZ(rz);\n  }\n\n  rotateAxis(radians, axis) {\n    mat4_rotate(this, this, radians, axis);\n    this.check();\n    return this;\n  }\n\n  scale(vec) {\n    mat4_scale(this, this, vec);\n    this.check();\n    return this;\n  }\n\n  translate(vec) {\n    mat4_translate(this, this, vec);\n    this.check();\n    return this;\n  }\n\n  transformVector2(vector, out) {\n    out = out || new Vector2();\n    vec2_transformMat4(out, vector, this);\n    assert(validateVector2(out));\n    return out;\n  }\n\n  transformVector3(vector, out = new Vector3()) {\n    out = out || new Vector3();\n    vec3_transformMat4(out, vector, this);\n    assert(validateVector3(out));\n    return out;\n  }\n\n  transformVector4(vector, out = new Vector4()) {\n    out = out || new Vector4();\n    vec4_transformMat4(out, vector, this);\n    assert(validateVector4(out));\n    return out;\n  }\n\n  // Transforms any 2, 3 or 4 element vector\n  // returns a newly minted Vector2, Vector3 or Vector4\n  transformVector(vector, out) {\n    switch (vector.length) {\n    case 2: return this.transformVector2(vector, out);\n    case 3: return this.transformVector3(vector, out);\n    case 4: return this.transformVector4(vector, out);\n    default: throw new Error('Illegal vector');\n    }\n  }\n\n  transformDirection(vector, out) {\n    switch (vector.length) {\n    case 2:\n      vec4_transformMat4(tempVector4, [vector[0], vector[1], 0, 0], this);\n      out = out || new Vector2();\n      [out[0], out[1]] = tempVector4;\n      break;\n    case 3:\n      vec4_transformMat4(tempVector4, [vector[0], vector[1], vector[2], 0], this);\n      out = out || new Vector3();\n      [out[0], out[1], out[2]] = tempVector4;\n      break;\n    case 4:\n      assert(vector[3] === 0);\n      out = out || new Vector4();\n      vec4_transformMat4(out, vector, this);\n      break;\n    default: throw new Error('Illegal vector');\n    }\n    return out;\n  }\n\n  transformPoint(vector, out) {\n    switch (vector.length) {\n    case 2:\n      out = out || new Vector2();\n      vec4_transformMat4(out, [vector[0], vector[1], 0, 1], this);\n      out.length = 2;\n      assert(validateVector2(out));\n      break;\n    case 3:\n      out = out || new Vector3();\n      vec4_transformMat4(out, [vector[0], vector[1], vector[2], 1], this);\n      out.length = 3;\n      assert(validateVector3(out));\n      break;\n    case 4:\n      assert(vector[3] !== 0);\n      out = out || new Vector4();\n      vec4_transformMat4(out, vector, this);\n      assert(validateVector4(out));\n      break;\n    default:\n      throw new Error('Illegal vector');\n    }\n    return out;\n  }\n}\n"]}